<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>JDHS - Soapbox Derby - 2025</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="icon" href="{{url_for('static', filename='images/favicon.png')}}" type="image/x-icon">
        <link rel="stylesheet" href="{{url_for('static', filename='style/styles.css')}}">
        <link rel="stylesheet" href="{{url_for('static', filename='style/style.css')}}">
        <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js" integrity="sha384-j1CDi7MgGQ12Z7Qab0qlWQ/Qqz24Gc6BM0thvEMVjHnfYGF0rmFCozFSxQBxwHKO" crossorigin="anonymous"></script>
    </head>
<body>
<div class="blue-banner">
  <div class="banner-content">
    <h1>John Dewey High School:</h1>
    <h2><b>Soapbox Derby</b></h2>
    <h3>Youth-oriented gravity racer</h3>
    <p>— <time datetime="2025-06-14">June 14, 2025</time> —</p>
  </div>
</div>


<button id="sidebarToggle" aria-label="Open menu" class="sidebar-toggle-btn">
  ☰
</button>

<nav id="sidebar" class="sidebar">
  <div class="sidebar-header">
    <h1>JDHS - Soapbox Derby - 2025</h1>
    <button id="sidebarClose" aria-label="Close menu" class="sidebar-close-btn">&times;</button>
  </div>
  <ul class="sidebar-nav">
    <li><a href="#about">About The Event</a></li>
    <li><a href="#poster">Posters & Images</a></li>
    <li><a href="#dire">Directions To JDHS</a></li>
    <li><a href="#footer">More Information</a></li>
  </ul>
  <button class="btn-admin sidebar-btn" type="button" data-bs-toggle="modal" data-bs-target="#admin-login" id="adminbtn">Admin login</button>
  <button class="record-btn sidebar-btn" type="button" data-bs-toggle="modal" data-bs-target="#modal-record" id="recordbtn2">Record yourself!</button>
</nav>

<!--  black -->
<div class="sidebar-overlay"></div>

  <script>
  const sidebar = document.getElementById('sidebar');
  const toggleBtn = document.getElementById('sidebarToggle');
  const closeBtn = document.getElementById('sidebarClose');
  const overlay = document.querySelector('.sidebar-overlay');
  const admin = document.getElementById('adminbtn');
  const record = document.getElementById('recordbtn2');

    toggleBtn.addEventListener('click', () => {
      sidebar.classList.add('active');
      toggleBtn.classList.add('hidden');
    });

    closeBtn.addEventListener('click', () => {
      sidebar.classList.remove('active');
      toggleBtn.classList.remove('hidden');
    });

    overlay.addEventListener('click', () => {
      sidebar.classList.remove('active');
      toggleBtn.classList.remove('hidden');
    });

    admin.addEventListener('click', () =>{
      sidebar.classList.remove('active');
      toggleBtn.classList.remove('hidden');
    });
    record.addEventListener('click', () =>{
      sidebar.classList.remove('active');
      toggleBtn.classList.remove('hidden');
    });


  </script>

  <main id="mainContent">
    <!-- About section -->
<div class="about-container" id="about">
  <div class="about-content">
    <h2 class="record-text">Click below to record!</h2>
    <button class="record-btn" type="button" data-bs-toggle="modal" data-bs-target="#modal-record">Record yourself!</button>
    
    <h2 class="div-title" id="aboutdisplay"></h2>
    <div class="event-description"> <!-- New container -->
      <p id="aboutcontent"></p>
    </div>
  </div>
</div>

      <script>
        let iteration = 0;
        const txt = 'About the Event';
        const speed = 25;
        const animated3 = document.getElementById("aboutdisplay");

        function typeinabout(){
          if (iteration < txt.length) {
            var _re = txt.charAt(iteration)
            animated3.innerHTML += _re;
            setTimeout(typeinabout, speed);
            iteration++;
            return true;
          }
          return false;
        }

        const content = "The JDHS Soap Box Derby celebrates creativity, teamwork, and the legacy of Pat Lockhart, an amazing educator who inspired hands on learning. Students race with soapbox cars, using gravity as their engine, this event honors Pat Lockhart's vision of empowering children with hands on innovation!";
        const about = document.getElementById("aboutcontent");
        let iter = 0;

        function typeinabout2(){
          if(iter < content.length){
            about.innerHTML += content.charAt(iter);
            iter++;
            setTimeout(typeinabout2, speed);
          }
        }

        document.addEventListener("DOMContentLoaded", (event)=> {
          typeinabout();
          typeinabout2();
        });

      </script>
    </div>
  </div>

    <!-- Event poster -->
<div class="poster-container" id="poster">
<h1 style="font-size: 23px;text-align: center;font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif; margin-left: 20px; margin-right: 20px;">JDHS Admitted Student Welcome Banner</h1>
    <div class="poster container-fluid">
      <img src="https://i.postimg.cc/L52fpYJn/Screenshot-2025-06-13-164819.png" class="img-thumbnail" alt="Event Poster">
    </div>
<h1 style="font-size: 23px;text-align: center;font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif; margin-left: 20px; margin-right: 20px;">Tribute to Pat Lockhart - JDHS Soap Box Derby 2025</h1>
    <div class="poster container-fluid">
      <img src="https://i.postimg.cc/Jn2nTsjf/Screenshot-2025-06-13-171935.png" class="img-thumbnail" alt="Event Poster">
    </div>
    </div>

    <!--directions-->
<div class="directions-container" id="dire">
  <h3 class="directions-heading">Directions To JDHS</h3>
  <div class="map-buttons">
    <a href="https://maps.app.goo.gl/2oNjS8PTYgS4GPux7" target="_blank" class="map-button google-maps">
      <img src="https://upload.wikimedia.org/wikipedia/commons/a/aa/Google_Maps_icon_%282020%29.svg" alt="Google Maps icon" class="map-icon">
      Google Maps
    </a>
    <a href="https://maps.apple.com/place?place-id=I54BF1FD6E144D110" target="_blank" class="map-button apple-maps">
      <img src="https://upload.wikimedia.org/wikipedia/commons/3/39/Apple_Maps_Logo_3D.png" alt="Apple Maps icon" class="map-icon">
      Apple Maps
    </a>
  </div>
</div>


<style>
.directions-container {
  text-align: center;
  margin: 20px 0;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
}

.directions-heading {
  color: #333;
  margin-bottom: 12px;
  font-weight: 500;
}

.map-buttons {
  display: flex;
  gap: 12px;
  justify-content: center;
}

.map-button {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 16px;
  border-radius: 8px;
  text-decoration: none;
  font-weight: 500;
  transition: all 0.2s ease;
  box-shadow: 0 1px 3px rgba(0,0,0,0.1);
}

.google-maps {
  background-color: #4285F4;
  color: white;
}

.apple-maps {
  background-color: #000;
  color: white;
}

.map-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 6px rgba(0,0,0,0.1);
}

.map-icon {
  width: 18px;
  height: 18px;
}
</style>

      <!-- Event poster -->
    <div class="poster container-fluid">
      <h1 style="font-size: 32px;text-align: center;font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;">John Dewey High School Location</h1>
      <img src="https://i.postimg.cc/fTs5zyG7/Screenshot-2025-06-13-164439.png" class="img-thumbnail" alt="Event Poster">
    </div>


      <!-- Footer section -->
  <footer class="text-center text-white" style="background-color:#3c8dbc;" id="footer">
    <div class="container p-4">
      <section class="mb-4">
        <a class="btn btn-primary btn-floating m-1" style="background-color: #3b5998" href="https://www.facebook.com/BrooklynJohnDeweyHsInfo/" role="button">
          <img src="{{url_for('static', filename='images/facebook.png')}}" alt="Facebook">
        </a>
        <a class="btn btn-primary btn-floating m-1" style="background-color: #f81c1c" href="https://www.johndeweyhighschool.org/" role="button">
          <img src="{{url_for('static', filename='images/jdhs.png')}}" alt="JDHS Website">
        </a>
        <a class="btn btn-primary btn-floating m-1" style="background-color: #ac2bac" href="https://www.instagram.com/johndeweybk/" role="button">
          <img src="{{url_for('static', filename='images/instagram.png')}}" alt="Instagram">
        </a>
        <a class="btn btn-primary btn-floating m-1" style="background-color: #4d4d4d" href="https://github.com/Hahalxl" role="button">
          <img src="{{url_for('static', filename='images/github.png')}}" alt="GitHub">
        </a>
      </section>

      <section class="mb-4">
        <p>
          Thank you for participating in this event! See below for more information about this website.
        </p>
      </section>

      <section class="">
        <div class="row">
          <div class="col-lg-3 col-md-6 mb-4 mb-md-0">
            <h5 class="text-uppercase">John Dewey High School</h5>
            <ul class="list-unstyled mb-0">
              <li><a href="https://www.johndeweyhighschool.org/" class="text-white">JDHS - Main website</a></li>
              <li><a href="https://www.instagram.com/johndeweybk/" class="text-white">JDHS - Instagram</a></li>
              <li><a href="https://www.facebook.com/BrooklynJohnDeweyHsInfo/" class="text-white">JDHS - Facebook</a></li>
            </ul>
          </div>
          <div class="col-lg-3 col-md-6 mb-4 mb-md-0">
            <h5 class="text-uppercase">About Us</h5>
            <ul class="list-unstyled mb-0">
              <li><a href="https://github.com/Hahalxl" class="text-white">Alexander's GitHub</a></li>
              <li><a href="https://github.com/abcd123alex" class="text-white">Alex's GitHub</a></li>
            </ul>
          </div>
          <div class="col-lg-3 col-md-6 mb-4 mb-md-0">
            <h5 class="text-uppercase">Partner Schools</h5>
            <ul class="list-unstyled mb-0">
              <li><a href="https://www.ps200.com/" class="text-white">PS 200 - The Benson School</a></li>
              <li><a href="https://www.is228.org/" class="text-white">IS 228 - David A. Boody</a></li>
              <li><a href="https://www.ps215.org/" class="text-white">PS 215 - Morris H. Weiss</a></li>
              <li><a href="https://sites.google.com/schools.nyc.gov/is278/home" class="text-white">IS 278 - Marine Park</a></li>
              <li><a href="https://www.is201k.org/" class="text-white">IS 201 - Madeleine Brennan School</a></li>
            </ul>
          </div>
          <div class="col-lg-3 col-md-6 mb-4 mb-md-0">
            <h5 class="text-uppercase">Website Tools</h5>
            <ul class="list-unstyled mb-0">
              <li><a href="https://ngrok.com/" class="text-white">Ngrok</a></li>
              <li><a href="https://www.python.org/" class="text-white">Python</a></li>
              <li><a href="https://git-scm.com/" class="text-white">Git</a></li>
            </ul>
          </div>
        </div>
      </section>

      <div class="text-center p-3 footer-end" style="background-color: rgba(0, 0, 0, 0.2)">
      Backend: Alexander Liang He<br>
      Frontend: Alexander Liang He & Alex Liu
      </div>
    </div>
    

  </footer>
  </main>

  <!-- Record form modal -->
  <div class="modal fade" id="modal-record">
    <div class="modal-dialog modal-fullscreen">
      <div class="modal-content">
        <div class="header">
          <h1 class="header-text-1">Soapbox Derby<br>Registration Form</h1>
        </div>

        <div class="modal-body">
          <form action="/record">
            <div class="div-input">
              <label for="Name" class="inputing">Name:*</label>
              <br>

<input type="text" class="input-first" name="first" placeholder="First Name*" required
       oninput="this.value = this.value.replace(/[^a-zA-Z\s'-]/g, '')" />

<input type="text" class="input-last" name="last" placeholder="Last Name*" required
       oninput="this.value = this.value.replace(/[^a-zA-Z\s'-]/g, '')" />

              <label for="osis" class="inputing">OSIS/Student ID of the rider:*</label>
              <input
                type="tel"
                name="osis"
                class="inputs"
                placeholder="Ex: 235000000*"
                minlength="9"
                maxlength="9"
                inputmode="numeric"
                pattern="\d{9}"
                oninput="this.value = this.value.replace(/[^0-9]/g, '')"
                required
              />

<label class="inputing">Rider's Birthday*</label>
<div class="birthday-selectors">
  <!-- Month Dropdown -->
  <select id="dob_month" class="dob-select" required>
    <option value="" disabled selected>Month*</option>
    <option value="01">January</option>
    <option value="02">February</option>
    <option value="03">March</option>
    <option value="04">April</option>
    <option value="05">May</option>
    <option value="06">June</option>
    <option value="07">July</option>
    <option value="08">August</option>
    <option value="09">September</option>
    <option value="10">October</option>
    <option value="11">November</option>
    <option value="12">December</option>
  </select>

  <!-- Day Dropdown -->
  <select id="dob_day" class="dob-select" required>
    <option value="" disabled selected>Day*</option>
    <!-- Days will be populated by JavaScript -->
  </select>

  <!-- Year Dropdown -->
  <select id="dob_year" class="dob-select" required>
    <option value="" disabled selected>Year*</option>
    <!-- Years will be populated by JavaScript -->
  </select>
  
  <!-- Hidden input that will contain the combined date -->
  <input type="hidden" name="dobs" id="dob" required>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  // Generate years (from current year back to 100 years ago)
  const yearSelect = document.getElementById('dob_year');
  const currentYear = new Date().getFullYear();
  for (let year = currentYear; year >= currentYear - 100; year--) {
    const option = document.createElement('option');
    option.value = year;
    option.textContent = year;
    yearSelect.appendChild(option);
  }

  // Generate days (1-31)
  const daySelect = document.getElementById('dob_day');
  for (let day = 1; day <= 31; day++) {
    const option = document.createElement('option');
    option.value = day < 10 ? '0' + day : day;
    option.textContent = day;
    daySelect.appendChild(option);
  }

  // Update days based on month/year selection
  function updateDays() {
    const month = document.getElementById('dob_month').value;
    const year = document.getElementById('dob_year').value;
    const daySelect = document.getElementById('dob_day');
    
    if (!month || !year) return;
    
    // Get days in month
    const daysInMonth = new Date(year, month, 0).getDate();
    
    // Update day options
    const currentDay = daySelect.value;
    daySelect.innerHTML = '<option value="" disabled selected>Day</option>';
    
    for (let day = 1; day <= daysInMonth; day++) {
      const option = document.createElement('option');
      option.value = day < 10 ? '0' + day : day;
      option.textContent = day;
      daySelect.appendChild(option);
    }
    
    // Restore selected day if it's still valid
    if (currentDay && currentDay <= daysInMonth) {
      daySelect.value = currentDay;
    }
  }

  // Update the hidden dob field whenever any selection changes
  function updateDOBField() {
    const month = document.getElementById('dob_month').value;
    const day = document.getElementById('dob_day').value;
    const year = document.getElementById('dob_year').value;
    
    if (month && day && year) {
      document.getElementById('dob').value = `${month}/${day}/${year}`;
    } else {
      document.getElementById('dob').value = '';
    }
  }

  // Add event listeners
  document.getElementById('dob_month').addEventListener('change', function() {
    updateDays();
    updateDOBField();
  });
  
  document.getElementById('dob_year').addEventListener('change', function() {
    updateDays();
    updateDOBField();
  });
  
  document.getElementById('dob_day').addEventListener('change', updateDOBField);
  
  // Initial update
  updateDOBField();
});
</script>

<style>
.birthday-selectors {
  display: flex;
  gap: 10px;
  margin-bottom: 15px;
}

.dob-select {
  flex: 1;
  padding: 8px;
  border: 1px solid #ccc;
  border-radius: 4px;
  font-size: 14px;
}
</style>


            <!--phonenum + script-->
            <label for="phone" class="inputing">Phone Number:*</label>
              <input
  type="tel"
  id="phoneInput"
  class="inputs"
  name="phone"
  placeholder="+1-___-___-____*"
  pattern="\+1-\d{3}-\d{3}-\d{4}"
  maxlength="16"
  inputmode="tel"
  required
/>

<script>
  const phoneInput = document.getElementById('phoneInput');

  phoneInput.addEventListener('input', (e) => {
    let val = phoneInput.value;

    // If user deleted all, don't force prefix immediately
    if (!val.startsWith('+1')) {
      val = '+1';
    }

    // Remove all chars except digits and plus
    val = val.replace(/[^\d+]/g, '');

    let digits = val.slice(2).substring(0, 10);

    let formatted = '+1';

    if (digits.length > 0) formatted += '-';
    if (digits.length <= 3) {
      formatted += digits;
    } else if (digits.length <= 6) {
      formatted += digits.substring(0, 3) + '-' + digits.substring(3);
    } else {
      formatted += digits.substring(0, 3) + '-' + digits.substring(3, 6) + '-' + digits.substring(6);
    }

    phoneInput.value = formatted;
  });

  phoneInput.addEventListener('focus', () => {
    setTimeout(() => {
      phoneInput.selectionStart = phoneInput.selectionEnd = phoneInput.value.length;
    }, 0);
  });
</script>

  <!--end of phonenum + script-->


<label for="email" class="inputing">Email:*</label>
<input
  type="email"
  class="inputs"
  name="email"
  placeholder="example@email.com*"
  required
  pattern="^[^@\s]+@[^@\s]+\.[^@\s]+$"
/>


<!-- Role Select -->
<label for="role" class="inputing">Role:*</label>
<select id="role" name="role" class="form-select" required>
  <option value="" disabled selected>Select role*</option>
  <option value="Volunteer">Volunteer</option>
  <option value="Parent">Parent</option>
  <option value="Pit Crew">Pit Crew</option>
  <option value="Teacher">Teacher</option>
</select>
<div id="roleError" class="error-message" style="color: red; display: none; margin-top: 5px;">Please select a role</div>

<!-- School Select -->
<label for="school" class="inputing">School:*</label>
<select id="school" name="school" class="form-select" required>
  <option value="" disabled selected>Select school*</option>
  <option value="PS 200 - The Benson School">PS 200 - The Benson School</option>
  <option value="IS 228 - David A. Boody">IS 228 - David A. Boody</option>
  <option value="PS 215 - Morris H. Weiss">PS 215 - Morris H. Weiss</option>
  <option value="IS 278 - Marine Park">IS 278 - Marine Park</option>
  <option value="IS 201 - Madeleine Brennan School">IS 201 - Madeleine Brennan School</option>
  <option value="John Dewey High School">John Dewey High School</option>
</select>
<div id="schoolError" class="error-message" style="color: red; display: none; margin-top: 5px;">Please select a school</div>

<script>
  // Simple validation for the select elements
  document.addEventListener('DOMContentLoaded', function() {
    // If you have a custom submit button, add this click handler
    document.getElementById('yourSubmitButtonId')?.addEventListener('click', function(e) {
      let isValid = true;
      
      // Validate role select
      const roleSelect = document.getElementById('role');
      const roleError = document.getElementById('roleError');
      if (!roleSelect.value) {
        roleError.style.display = 'block';
        roleSelect.style.borderColor = 'red';
        isValid = false;
      } else {
        roleError.style.display = 'none';
        roleSelect.style.borderColor = '';
      }
      
      // Validate school select
      const schoolSelect = document.getElementById('school');
      const schoolError = document.getElementById('schoolError');
      if (!schoolSelect.value) {
        schoolError.style.display = 'block';
        schoolSelect.style.borderColor = 'red';
        isValid = false;
      } else {
        schoolError.style.display = 'none';
        schoolSelect.style.borderColor = '';
      }
      
      if (!isValid) {
        e.preventDefault();
        return false;
      }
    });
    
    // Clear errors when a selection is made
    document.getElementById('role').addEventListener('change', function() {
      document.getElementById('roleError').style.display = 'none';
      this.style.borderColor = '';
    });
    
    document.getElementById('school').addEventListener('change', function() {
      document.getElementById('schoolError').style.display = 'none';
      this.style.borderColor = '';
    });
  });
</script>

              <p class="required-note">* Required fields</p>
              <div class="div-reset">
                  <button type="reset" class="record-clear" data-bs-toggle="modal" data-bs-target="#confirmResetModal">
                      <img class="record-clear-image" src="{{url_for('static', filename='images/restart.png')}}" alt="Reset">
                  </button>
                  <button type="submit" class="record-submit">Record</button>
              </div>
          </form>
        </div>

        <div class="modal-footer">
          <h5 class="footer-text">Made by Alex</h5>
          <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Close</button>
        </div>
        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="admin-login">
    <div class="modal-dialog modal-fullscreen">
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title">Admin Panel</h4>
        </div>

        <div class="modal-body">
          <form action="/admin">
            <label for="username" class="inputing">Admin Username</label>
            <input type="text" class="inputs" name="username" required>
            <label for="password" class="inputing">Password</label>
            <input type="password" class="inputs" name="password" required>
            <button type="submit" class="btn btn-success">Login</button>
          </form>
        </div>

        <div class="modal-footer">
          <p style="float:left;display: flex;">Login created by Alexander</p>
          <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>

</body>
</html>